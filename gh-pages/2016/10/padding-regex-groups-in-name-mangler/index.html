<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Primary Unit mirror on GitHub – Padding regex groups in Name Mangler</title>

  <!-- Load my combined stylesheet -->
  <link rel="stylesheet" href="/resources/all.min.css">


  <link rel="license" href="https://creativecommons.org/licenses/by/4.0/">

  <link rel="alternate" type="application/rss+xml" title="RSS feed for Primary Unit" href="/rss">
  <link rel="alternate" type="application/json" title="JSON feed for Primary Unit" href="/feed.json">

  <!-- Apple pinned sites icon, Apple touch icon, Favicon -->
  <link rel="mask-icon" href="/resources/favicon.svg" color="#1369BF">
  <link rel="apple-touch-icon-precomposed" href="/resources/favicon.png">
  <link rel="icon" href="/resources/favicon.ico">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A mirror of https://www.robjwells.com hosted on GitHub">
</head>

<body>

<div class="wrapper">

<header class="site-header">

  <div class="site-title-container mute-links">
    <h1 class="site-title"><a href="https://robjwells.github.io">Primary Unit mirror on GitHub</a></h1>
    <p class="site-byline"><i>by</i> Rob Wells</p>
  </div>

  <div class="site-menu-container">

    <nav id="site-nav">
      <ul class="site-links mute-links">
        <li><a href="/about/">About</a></li>
        <li><a href="/archives/">Archives</a></li>
        <li><a href="/feed.json">JSON&nbsp;feed</a></li>
        <li><a href="/rss">RSS&nbsp;feed</a></li>
      </ul>
    </nav>

    <label for="search-field" class="site-search-label">
      Site search
    </label>
    <form id="site-search" class="site-search" method="get" action="https://duckduckgo.com/">
      <input name="q" type="text" id="search-field" class="search-field" placeholder="via DuckDuckGo">
      <input name="sites" value="https://robjwells.github.io" hidden>
      <button type="submit" class="search-button">Search</button>
    </form>

  </div> <!-- .site-menu-container -->

</header> <!-- .site-header -->

<main role="main">

  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2016/10/padding-regex-groups-in-name-mangler/">Padding regex groups in Name Mangler</a></h2>
      <p><time datetime="2016-10-21T22:45">Friday, October 21 2016</time></p>
    </header>
    <p>I’m a big fan of <a href="http://manytricks.com/namemangler/">Name Mangler by Many Tricks</a>, an interactive file renaming application for everything from simple operations to really quite complex and powerful ones, with a comfortable and straightforward interface.</p>
<p>I don’t use it particularly often but it’s nice to have in the toolbox for things that might otherwise be frustrating.</p>
<p>One of my most common tasks for Name Mangler is converting the filename convention used internally at work for naming page files to a more general format we use for our external partners.</p>
<p>Here’s what they look like:</p>
<pre><code># Internal
1_Front_221016.pdf
# External
MS_2016_10_22_001.pdf</code></pre>


<p>Normally this is done automatically with a scheduled script, but occasionally that script fails (at a different stage) and it has to be done by hand. Now obviously this involves a regular expression, and the page number group (at the start of the internal name, end of the external) is zero-padded so it’s three digits long.</p>
<p>So, in Name Mangler’s advanced renaming syntax that becomes:</p>
<pre><code>[pad
    &quot;$1&quot;
    to &quot;-3&quot;
    with &quot;0&quot;
]</code></pre>


<p>right?</p>
<p>Well, no. What happens is interesting. The literal string <code>$1</code> is zero-padded until it’s three digits long: <code>0$1</code> (one extra zero). But after that the regex replacement is made, so page #1 becomes <code>01</code>: 1 with one zero on the front.</p>
<p>To Many Tricks’s great credit, they responded to the support ticket I raised with example code in less than a day, along with an explanation of what’s happening by the developer.</p>
<p>The trick is, instead of providing the group name as the argument to pad, to perform the regex search in-line:</p>
<pre><code>[pad
    [findRegularExpression
        &quot;^(\d+)_.*$&quot;
        in &lt;name&gt;
        replace with &quot;$1&quot;
    ]
    to &quot;-3&quot;
    with &quot;0&quot;
]</code></pre>


<p>This means that when <code>pad</code> gets its arguments, it’s exactly what you want to pad.</p>
<p>By necessity this uses regexes twice: one for parsing the date and constructing most of the name, and this for finding and padding the page number. Perhaps the reason why I missed this approach by myself is that in the Python code, the regex search is performed once and the groups placed in this format string:</p>
<pre><code>MS_{date:%Y}_{date:%m}_{date:%d}_{page:03}.pdf</code></pre>


<p>Which takes care of the padding with no fuss. (At this point, the date has been parsed for completeness’s sake, hence the strftime codes.)</p>
<p>That might lead to a question about why I don’t just use Python to do this. And the answer is that, once you’ve got a recipe that works for you, Name Mangler is painless and flexible. Really, <a href="http://manytricks.com/namemangler/">check it out</a>.</p>
  </article>

</main>

<footer class="site-footer">
  <small class="mute-links">
    This work is licensed under a
    <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License</a>.
  </small>
</footer> <!-- .site-footer -->

</div> <!-- .wrapper -->

</body>

</html>