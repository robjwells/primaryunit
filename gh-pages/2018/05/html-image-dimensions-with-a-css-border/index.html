<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Primary Unit mirror on GitHub – HTML image dimensions with a CSS border</title>

  <!-- Load my combined stylesheet -->
  <link rel="stylesheet" href="/resources/all.min.css">


  <link rel="license" href="https://creativecommons.org/licenses/by/4.0/">

  <link rel="alternate" type="application/rss+xml" title="RSS feed for Primary Unit" href="/rss">
  <link rel="alternate" type="application/json" title="JSON feed for Primary Unit" href="/feed.json">

  <!-- Apple pinned sites icon, Apple touch icon, Favicon -->
  <link rel="mask-icon" href="/resources/favicon.svg" color="#1369BF">
  <link rel="apple-touch-icon-precomposed" href="/resources/favicon.png">
  <link rel="icon" href="/resources/favicon.ico">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A mirror of https://www.robjwells.com hosted on GitHub">
</head>

<body>

<div class="wrapper">

<header class="site-header">

  <div class="site-title-container mute-links">
    <h1 class="site-title"><a href="https://robjwells.github.io">Primary Unit mirror on GitHub</a></h1>
    <p class="site-byline"><i>by</i> Rob Wells</p>
  </div>

  <div class="site-menu-container">

    <nav id="site-nav">
      <ul class="site-links mute-links">
        <li><a href="/about/">About</a></li>
        <li><a href="/archives/">Archives</a></li>
        <li><a href="/feed.json">JSON&nbsp;feed</a></li>
        <li><a href="/rss">RSS&nbsp;feed</a></li>
      </ul>
    </nav>

    <label for="search-field" class="site-search-label">
      Site search
    </label>
    <form id="site-search" class="site-search" method="get" action="https://duckduckgo.com/">
      <input name="q" type="text" id="search-field" class="search-field" placeholder="via DuckDuckGo">
      <input name="sites" value="https://robjwells.github.io" hidden>
      <button type="submit" class="search-button">Search</button>
    </form>

  </div> <!-- .site-menu-container -->

</header> <!-- .site-header -->

<main role="main">

  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2018/05/html-image-dimensions-with-a-css-border/">HTML image dimensions with a CSS border</a></h2>
      <p><time datetime="2018-05-17T21:00">Thursday, May 17 2018</time></p>
    </header>
    <p>When I use images here, I tend to give ones without any transparency a border, which is done using CSS and applied to <code>img</code> tags unless they have a <code>no-border</code> class.</p>
<p>Like a good web citizen, I also <a href="http://w3c.github.io/html/semantics-embedded-content.html#example-82f39213">specify image dimensions in HTML</a>:</p>
<blockquote>
<p>“The image’s rendered size is given in the width and height attributes, which allows the user agent to allocate space for the image before it is downloaded.”</p>
</blockquote>
<p>In fact my BBEdit <code>image</code> snippet makes it a doddle:</p>
<pre><code>&lt;p &lt;#* class=&quot;full-width&quot;#&gt;&gt;
    &lt;img
        src=&quot;/images/#SELECTIONORINSERTION#&quot;
        alt=&quot;&lt;#alt text#&gt;&quot;
        &lt;#* class=&quot;no-border&quot;#&gt;
        width=&lt;#width#&gt;
        height=&lt;#height#&gt;
        /&gt;
&lt;/p&gt;</code></pre>


<p>But this causes a problem, which I’ve spotted in a couple of my recent posts.</p>
<p>If you specify the image dimensions, and use a CSS border, <em>and</em> have your CSS <code>box-sizing</code> set to <code>border-box</code>, then the CSS border shrinks the amount of space available to the image to its specified dimensions − 2 × the border width.</p>
<p>So if you specify your <code>img</code> dimensions to match the dimensions of the file, then the image itself will be shrunk within the element.</p>
<p>This animation shows this situation, and what happens when you toggle the CSS border. Watch what happens to the image itself.</p>
<p class="full-width">
    <img
        src="/images/2018-05-17-border-with-dimensions.gif"
        alt="An animation showing an image being squeezed within the space it has been allocated, causing distortion."
        class="no-border"
        width=565
        height=385
        />
</p>

<p>(It’s got a slight offset from the text because it’s a screenshot of this blog and includes some of the background on each side.)</p>
<p>In contrast, this animation shows what happens when the dimensions are not specified, and so the image is free to grow when the border is applied:</p>
<p class="full-width">
    <img
        src="/images/2018-05-17-border-no-dimensions.gif"
        alt="An animation showing an image growing when a CSS border is applied, with no distortion to the image itself."
        class="no-border"
        width=565
        height=385
        />
</p>

<p>Really the culprit here is <code>box-sizing: border-box</code>, forcing the border to remain within the size of the <code>img</code> element itself. This is a behaviour you actually want, as it solves the old CSS problem of juggling widths, borders and padding within a parent element. Check out <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/box-sizing">MDN’s <code>box-sizing</code> page</a> to see what I mean.</p>
<p>What are my options, then?</p>
<ul>
<li>
<p>Change box-sizing.</p>
<p>I’m not touching this because the potential sizing headaches are not worth it, even just for <code>img</code> elements.</p>
</li>
<li>
<p>Apply a border to the image files themselves.</p>
<p>No, because if I change my mind about the CSS, previously posted images are stuck with the old style forever. CSS borders should also work correctly across high-density displays, whereas a 1px border in the file may not.</p>
</li>
<li>
<p>Don’t specify dimensions in the HTML.</p>
<p>I don’t like the idea of making pages of this site slower to render, but I think this is the least bad option, particularly given that <a href="/2017/04/page-speed/">this site is already pretty fast</a>.</p>
</li>
</ul>
<p>It’s not ideal, but that BBEdit snippet is now just:</p>
<pre><code>&lt;p &lt;#* class=&quot;full-width&quot;#&gt;&gt;
    &lt;img
        src=&quot;/images/#SELECTIONORINSERTION#&quot;
        alt=&quot;&lt;#alt text#&gt;&quot;
        &lt;#* class=&quot;no-border&quot;#&gt;
        /&gt;
&lt;/p&gt;</code></pre>


<p>Hey, at least it makes images quicker to include in posts!</p>
  </article>

</main>

<footer class="site-footer">
  <small class="mute-links">
    This work is licensed under a
    <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License</a>.
  </small>
</footer> <!-- .site-footer -->

</div> <!-- .wrapper -->

</body>

</html>