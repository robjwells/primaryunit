<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Primary Unit mirror on GitHub – page 15</title>

  <!-- Load my combined stylesheet -->
  <link rel="stylesheet" href="/resources/all.min.css">

  <!-- Load my combined JavaScript -->
  <script src="/resources/all.min.js" async></script>

  <link rel="license" href="https://creativecommons.org/licenses/by/4.0/">

  <link rel="alternate" type="application/rss+xml" title="RSS feed for Primary Unit" href="/rss">
  <link rel="alternate" type="application/json" title="JSON feed for Primary Unit" href="/feed.json">

  <!-- Apple pinned sites icon, Apple touch icon, Favicon -->
  <link rel="mask-icon" href="/resources/favicon.svg" color="#1369BF">
  <link rel="apple-touch-icon-precomposed" href="/resources/favicon.png">
  <link rel="icon" href="/resources/favicon.ico">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A mirror of https://www.robjwells.com hosted on GitHub">
</head>

<body>

<div class="wrapper">

<header class="site-header">

  <div class="site-title-container mute-links">
    <h1 class="site-title"><a href="https://robjwells.github.io">Primary Unit mirror on GitHub</a></h1>
    <p class="site-byline"><i>by</i> Rob Wells</p>
  </div>

  <div class="site-menu-container">

    <nav id="site-nav">
      <ul class="site-links mute-links">
        <li><a href="/about/">About</a></li>
        <li><a href="/archives/">Archives</a></li>
        <li><a href="/feed.json">JSON&nbsp;feed</a></li>
        <li><a href="/rss">RSS&nbsp;feed</a></li>
      </ul>
    </nav>

    <label for="search-field" class="site-search-label">
      Site search
    </label>
    <form id="site-search" class="site-search" method="get" action="https://duckduckgo.com/">
      <input name="q" type="text" id="search-field" class="search-field" placeholder="via DuckDuckGo">
      <input name="sites" value="https://robjwells.github.io" hidden>
      <button type="submit" class="search-button">Search</button>
    </form>

  </div> <!-- .site-menu-container -->

</header> <!-- .site-header -->

<main role="main">

  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2014/04/manhandled/">Manhandled</a></h2>
      <p><time datetime="2014-04-13T09:03">Sunday, April 13 2014</time></p>
    </header>
    <p><a href="http://www.leancrew.com/all-this/2014/04/oh-man/">Dr Drang</a> and <a href="http://nathangrigg.net/2014/04/zsh-push-line-or-edit/">Nathan</a> have both written recently about bringing up a man page for reference while typing a command in the terminal. I’ve two approaches to share, but unlike Nathan I can’t claim that they’re superior — just alternatives.</p>
<p>I prefer them over the right-click method because I don’t like to take my hands off the keyboard unless absolutely necessary, and moving to Zsh is a bit much for me right now.</p>
<p>First is <a href="http://www.obdev.at/products/launchbar/index.html">LaunchBar’s</a> built-in man page search (found under UTF-8 search templates in the index), which uses the <code>x-man-page://</code> URL scheme to bring up a new Terminal window. Here’s what you type:</p>
<pre><code>⌘-Space man Space `command` ↩</code></pre>


<p>The second approach layers the wonderful <a href="http://kapeli.com/dash">Dash</a> on top of LaunchBar, bringing up the man page in Dash’s interface instead of the Terminal.</p>
<pre><code>⌘-Space dash Space `command` ↩</code></pre>


<p>This gives you all the usual Dash goodies, including a section list and inline links to other man pages (if you decide, after all, to take your hands off the keyboard).</p>
<p>You can prepend <code>man:</code> to the command name to restrict the search to man pages only, or even add a search template of the form <code>dash://man:*</code> to LaunchBar’s index — in place of the first man page search if you like.</p>
  </article>
  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2014/01/misbehaving-single-column-nstableview/">Misbehaving single-column NSTableView</a></h2>
      <p><time datetime="2014-01-26T19:24">Sunday, January 26 2014</time></p>
    </header>
    <p>This is mostly a note for myself, as I was ready to pull my hair out earlier.</p>
<p>Interface Builder can get in your way when you want to create a single-column <code>NSTableView</code> where the column fills the entire width available.</p>
<p>Setting the column count to 1 doesn’t automatically resize it, and extending the column using its resize handle or by setting its width to the width of the view can cause a horizontal scrollbar to appear.</p>
<p>The solution is to <strong>resize the view itself</strong> — so that you eat into the space occupied by the single column, and then expand back to your desired width. It is incredibly stupid. Here’s a video:</p>
<video src="/images/2014-01-26_tableview.m4v" poster="/images/2014-01-26_tableview_poster.png" controls preload="metadata">
  Sorry if you can’t see it. <a href="/images/2014-01-26_tableview.m4v">Here’s a link to the file itself.</a>
</video>

<p>There’s a <a href="http://stackoverflow.com/questions/7545490/how-can-i-have-the-only-column-of-my-nstableview-take-all-the-width-of-the-table">Stack Overflow question</a> where the accepted answer recommends this method. Handily I misread it — only realising what it was saying after I’d stumbled across the resizing trick myself (after trying many other things).</p>
<p>In related news, I’m almost done with the excellent <a href="http://www.bignerdranch.com/book/cocoa_programming_for_mac_os_x_th_edition_">Big Nerd Ranch Cocoa book</a> after getting sidetracked for two months.</p>
  </article>
  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2014/01/scraping-entourage/">Scraping Entourage</a></h2>
      <p><time datetime="2014-01-22T13:32">Wednesday, January 22 2014</time></p>
    </header>
    <p>Early last year myself and my flatmate got into <a href="http://en.wikipedia.org/wiki/Entourage_(TV_series)">Entourage</a>, which is incredible. We devoured all eight seasons in a few weeks. One thing that I love about it is the soundtrack. It’s a mix of older and newer stuff and, frankly, I have no idea about music so it’s nice to have a pool of well-picked tracks to dip in to.</p>
<p>In December, when my flatmate rewatched the series, I decided to do something with the soundtrack. Getting the music (for 96 episodes) wasn’t as easy as downloading an album — it took some programming, a few headaches, and a bit of tedium. What follows was ultimately successful, but I’d hesitate to call it a success story.</p>
<h3>Sourcing the music</h3>
<p>HBO’s website <em>does</em> list the tracks used in each episode, but you can’t get at them as it’s all Flash. However, <a href="http://www.tunefind.com">Tunefind</a> has <a href="http://www.tunefind.com/show/entourage">good data</a>, which I imagine some industrious person has transcribed from the official list. In some cases it’s more complete.</p>
<p>But the advantages of having users assemble such data are weighed against the mistakes they may make and inconsistencies that creep in. I’ll address the practical implications later. First we need to extract the track details from the website.</p>
<div class="flag">
  <p>
    The programs in this post are incredibly rough. I share them in the hope they’ll help others and spark ideas, <em>not</em> as good examples.</p>
  <p>
    All of the code is collected in <a href="https://gist.github.com/robjwells/f26569278cd0d4bc49ed">a multi-file Gist</a>.
  </p>
</div>

<div class="syntax"><pre><span></span><span class="lineno"> 1 </span><span class="ch">#!/usr/local/bin/python3</span>
<span class="lineno"> 2 </span>
<span class="lineno"> 3 </span><span class="kn">import</span> <span class="nn">re</span>
<span class="lineno"> 4 </span><span class="kn">import</span> <span class="nn">json</span>
<span class="lineno"> 5 </span><span class="kn">from</span> <span class="nn">bs4</span> <span class="k">import</span> <span class="n">BeautifulSoup</span>
<span class="lineno"> 6 </span><span class="kn">from</span> <span class="nn">urllib.request</span> <span class="k">import</span> <span class="n">urlopen</span>
<span class="lineno"> 7 </span>
<span class="lineno"> 8 </span><span class="n">base_url</span> <span class="o">=</span> <span class="s1">&#39;http://www.tunefind.com&#39;</span>
<span class="lineno"> 9 </span><span class="n">seasons_index</span> <span class="o">=</span> <span class="s1">&#39;/show/entourage&#39;</span>
<span class="lineno">10 </span><span class="n">response</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="n">base_url</span> <span class="o">+</span> <span class="n">seasons_index</span><span class="p">)</span>
<span class="lineno">11 </span><span class="n">response_text</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
<span class="lineno">12 </span><span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response_text</span><span class="p">)</span>
<span class="lineno">13 </span>
<span class="lineno">14 </span><span class="n">seasons_div</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s1">&#39;lefttext sidebarIndent&#39;</span><span class="p">)</span>
<span class="lineno">15 </span><span class="n">seasons_urls</span> <span class="o">=</span> <span class="p">[(</span><span class="n">base_url</span> <span class="o">+</span> <span class="n">a_tag</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">])</span>
<span class="lineno">16 </span>                <span class="k">for</span> <span class="n">a_tag</span> <span class="ow">in</span> <span class="n">seasons_div</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)]</span>
<span class="lineno">17 </span>
<span class="lineno">18 </span><span class="n">tracks_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="lineno">19 </span>
<span class="lineno">20 </span><span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">seasons_urls</span><span class="p">:</span>
<span class="lineno">21 </span>  <span class="n">season</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">urlopen</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
<span class="lineno">22 </span>  <span class="n">episode_urls</span> <span class="o">=</span> <span class="p">[(</span><span class="n">base_url</span> <span class="o">+</span> <span class="n">a_tag</span><span class="p">[</span><span class="s1">&#39;href&#39;</span><span class="p">])</span> <span class="k">for</span> <span class="n">a_tag</span>
<span class="lineno">23 </span>                  <span class="ow">in</span> <span class="n">season</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>
<span class="lineno">24 </span>                    <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;episode\d+&#39;</span><span class="p">)})]</span>
<span class="lineno">25 </span>
<span class="lineno">26 </span>  <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">episode_urls</span><span class="p">:</span>
<span class="lineno">27 </span>    <span class="n">episode</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">urlopen</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
<span class="lineno">28 </span>
<span class="lineno">29 </span>    <span class="k">for</span> <span class="n">raw</span> <span class="ow">in</span> <span class="n">episode</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s1">&#39;tf-songevent-text&#39;</span><span class="p">):</span>
<span class="lineno">30 </span>      <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(.+)\n\s+by (.+)&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
<span class="lineno">31 </span>      <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
<span class="lineno">32 </span>        <span class="n">tracks_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">groups</span><span class="p">())</span>
<span class="lineno">33 </span>
<span class="lineno">34 </span><span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="n">tracks_list</span><span class="p">:</span>
<span class="lineno">35 </span>  <span class="c1"># filter list for duplicates</span>
<span class="lineno">36 </span>  <span class="k">if</span> <span class="n">tracks_list</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">track</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<span class="lineno">37 </span>    <span class="n">tracks_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">track</span><span class="p">)</span>
<span class="lineno">38 </span>
<span class="lineno">39 </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/Users/robjwells/Desktop/tracks.json&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tracks_json</span><span class="p">:</span>
<span class="lineno">40 </span>  <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">tracks_list</span><span class="p">,</span> <span class="n">tracks_json</span><span class="p">)</span>
</pre></div>


<p>Tunefind’s website has index pages for each series with links to each of their seasons, which link to pages for each episode that contain track details. The scraping code iterates over the seasons (lines 14–24), then the episodes (lines 26–32).</p>
<p>The loop starting on line 20 appends a tuple of the track title and artist name, found in line 30, to <code>tracks_list</code>. This is bluntly weeded for exact duplicates in lines 34–37. (Subtly different entries for the same track aren’t affected, so they have to be picked out when adding the tracks to Spotify, detailed below.)</p>
<p>Lastly the list is written to a file; I chose JSON because I wasn’t sure what I was going to do next. The tuples are converted to lists, which is fine for our purposes.</p>
<h3>Doing something with it</h3>
<p>We’ve now got a nice file of titles and artists — 789 tracks in total. The next question is how to use it. My goal was to construct a Spotify playlist, as the service has a large catalogue of tracks available for free and it would take no effort to use once set up.</p>
<p>Initially I considered using the <a href="https://developer.spotify.com">Spotify API</a>, but it appeared too daunting and the quality of the data would derail attempts to add tracks programmatically. Instead I settled on scripting the desktop client. That’s easier said than done, as its AppleScript support is poor.</p>
<div class="flag">
  <p>
    When I publish I always check the post’s links. Thank god I did, because Spotify has recently overhauled its developer site. The <a href="https://developer.spotify.com/technologies/web-api/">metadata API</a> looks far more approachable.
  </p>
  <p>
    However, discrepancies between the Tunefind data and Spotify’s catalogue would still likely cause headaches. Also, adding tracks to a playlist is still reserved for its <a href="https://developer.spotify.com/technologies/libspotify/">C API</a>.
  </p>
</div>

<p>After mulling over how much manual work I was willing to do, I came up with the idea for an AppleScript scaffold that, since I couldn’t script Spotify directly, would script around Spotify: using its URL scheme to search for tracks and a dialog box with controls to move through the list.</p>
<p>Underneath that would be Python that managed the track list, assembled the URL and handled the controls:</p>
<div class="syntax"><pre><span></span><span class="lineno"> 1 </span><span class="ch">#!/usr/local/bin/python3</span>
<span class="lineno"> 2 </span>
<span class="lineno"> 3 </span><span class="kn">import</span> <span class="nn">json</span>
<span class="lineno"> 4 </span><span class="kn">import</span> <span class="nn">subprocess</span>
<span class="lineno"> 5 </span>
<span class="lineno"> 6 </span><span class="n">position</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/Users/robjwells/Desktop/position&#39;</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span>
<span class="lineno"> 7 </span><span class="n">reported</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/Users/robjwells/Desktop/reported&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="lineno"> 8 </span>
<span class="lineno"> 9 </span>
<span class="lineno">10 </span><span class="k">def</span> <span class="nf">asrun</span><span class="p">(</span><span class="n">script</span><span class="p">):</span>
<span class="lineno">11 </span>  <span class="s2">&quot;Run the given AppleScript and return the standard output and error.&quot;</span>
<span class="lineno">12 </span>
<span class="lineno">13 </span>  <span class="n">osa</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s1">&#39;osascript&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">],</span>
<span class="lineno">14 </span>                         <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
<span class="lineno">15 </span>                         <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
<span class="lineno">16 </span>  <span class="k">return</span> <span class="n">osa</span><span class="o">.</span><span class="n">communicate</span><span class="p">(</span><span class="n">script</span><span class="o">.</span><span class="n">encode</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
<span class="lineno">17 </span>
<span class="lineno">18 </span>
<span class="lineno">19 </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;/Users/robjwells/Desktop/tracks.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">tracks_json</span><span class="p">:</span>
<span class="lineno">20 </span>  <span class="n">tracks_list</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">tracks_json</span><span class="p">)</span>
<span class="lineno">21 </span>
<span class="lineno">22 </span><span class="n">ascript</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="lineno">23 </span><span class="s1">tell application &quot;LaunchBar&quot;</span>
<span class="lineno">24 </span><span class="s1">   perform action &quot;Open Location&quot; with string &quot;spotify:search:</span><span class="si">{0}</span><span class="s1">&quot;</span>
<span class="lineno">25 </span><span class="s1">end tell</span>
<span class="lineno">26 </span>
<span class="lineno">27 </span><span class="s1">tell application &quot;Finder&quot;</span>
<span class="lineno">28 </span><span class="s1">   set dialog_result to display dialog &quot;Ready for next track?&quot; ¬</span>
<span class="lineno">29 </span><span class="s1">       buttons {{&quot;Report&quot;, &quot;Stop&quot;, &quot;Next&quot;}} default button &quot;Next&quot;</span>
<span class="lineno">30 </span><span class="s1">   return button returned of dialog_result</span>
<span class="lineno">31 </span><span class="s1">end tell</span>
<span class="lineno">32 </span><span class="s1">&#39;&#39;&#39;</span>
<span class="lineno">33 </span>
<span class="lineno">34 </span>
<span class="lineno">35 </span><span class="k">def</span> <span class="nf">prep_track</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
<span class="lineno">36 </span>  <span class="n">joint</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="lineno">37 </span>  <span class="k">return</span> <span class="n">joint</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">)</span>
<span class="lineno">38 </span>
<span class="lineno">39 </span>
<span class="lineno">40 </span><span class="k">def</span> <span class="nf">prompt</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
<span class="lineno">41 </span>  <span class="n">script</span> <span class="o">=</span> <span class="n">ascript</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prep_track</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="lineno">42 </span>  <span class="n">result</span> <span class="o">=</span> <span class="n">asrun</span><span class="p">(</span><span class="n">script</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="lineno">43 </span>  <span class="k">if</span> <span class="n">result</span> <span class="o">==</span> <span class="s1">&#39;Stop&#39;</span><span class="p">:</span>
<span class="lineno">44 </span>    <span class="k">return</span> <span class="kc">False</span>
<span class="lineno">45 </span>  <span class="k">elif</span> <span class="n">result</span> <span class="o">==</span> <span class="s1">&#39;Report&#39;</span><span class="p">:</span>
<span class="lineno">46 </span>    <span class="n">reported</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
<span class="lineno">47 </span>    <span class="n">reported</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="lineno">48 </span>  <span class="n">position</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="lineno">49 </span>  <span class="n">position</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">tracks_list</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<span class="lineno">50 </span>  <span class="k">return</span> <span class="kc">True</span>
<span class="lineno">51 </span>
<span class="lineno">52 </span>
<span class="lineno">53 </span><span class="n">raw_pos</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="lineno">54 </span><span class="k">if</span> <span class="n">raw_pos</span><span class="p">:</span>
<span class="lineno">55 </span>  <span class="n">pos</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">raw_pos</span><span class="p">)</span>
<span class="lineno">56 </span><span class="k">else</span><span class="p">:</span>
<span class="lineno">57 </span>  <span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
<span class="lineno">58 </span>
<span class="lineno">59 </span><span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="n">tracks_list</span><span class="p">[</span><span class="n">pos</span><span class="p">:]:</span>
<span class="lineno">60 </span>  <span class="k">if</span> <span class="ow">not</span> <span class="n">prompt</span><span class="p">(</span><span class="n">track</span><span class="p">):</span>
<span class="lineno">61 </span>    <span class="k">break</span>
<span class="lineno">62 </span>
<span class="lineno">63 </span><span class="n">position</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="lineno">64 </span><span class="n">reported</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>


<p>According to the file metadata, I created this script at 12.50am. Some of it is hilariously bad. I haven’t tidied up these scripts but I had to change a bit where I trampled all over my own global names. It’s in desperate need of re-ordering so I’m going to work through the script in the order parts are used, not in which they’re written.</p>
<p>At its core, it’s a little Python engine that uses <a href="http://www.leancrew.com/all-this/2013/03/combining-python-and-applescript/">Dr Drang’s <code>asrun</code> function</a> to run an AppleScript via <code>osascript</code>.</p>
<p>We start by opening a position file to store our place in the track list and a reported file to store any tracks which aren’t in the Spotify catalogue (lines 6 &amp; 7). Next we open and parse the JSON track list (lines 19 &amp; 20).</p>
<p>Lines 53–57 determine from the position file where to begin in the track list, with <code>pos</code> used to slice it in line 59. The selected part of the list is iterated over and each track tuple fed to the <code>prompt</code> function (lines 40–50).</p>
<p>This formats the track (using <code>prep_track</code> to join the artist and title, and replace spaces with plus signs) and inserts it into the AppleScript (line 41), which is then run.</p>
<p>The AppleScript opens the Spotify search URL and displays a dialog box:</p>
<p class="full-width">
  <img alt="Screenshot of the dialog box on top of the Spotify search results" src="/images/2014-01-22_entprompt.png">
</p>

<p>The chosen button is returned and assigned to <code>result</code>. If the searched-for track couldn’t be found, the “Report” button adds it to the reported file (lines 46 &amp; 47) and proceeds as if “Next” had also been clicked: writing the index of the next track to the position file and returning <code>True</code> to cause the loop in lines 59–61 to continue. “Stop” returns false and ends the loop — and so the script.</p>
<p>Within the AppleScript itself (lines 22–32), LaunchBar is used to open the Spotify. This is holdover from when I was trying to use LaunchBar’s “Browse in Spotify” action (select Spotify and press space) instead of the search URL. It didn’t work. There’s no reason to use LaunchBar anymore, this would work fine:</p>
<pre><code>open location &quot;search:spotify:{0}&quot;</code></pre>


<p>Where <code>{0}</code> is a <a href="http://docs.python.org/3/library/string.html#formatstrings">replacement field</a>.</p>
<p>Once the sliced list has been iterated over, we clean up by closing the position and reported files (lines 63 &amp; 64).</p>
<p>The script does a decent job of working around the inability to directly control Spotify. It leaves me to pick an appropriate track from the search results shown, drag it to a playlist and chose the appropriate next action from the dialog. It turned a mountain of tedious work into a reasonably-sized hill.</p>
<p>Being human, though, I occasionally picked the wrong button in the dialog, meaning some tracks weren’t reported or were reported in error. Ah well. I was still left with a playlist of about 570 tracks.</p>
<h3>A musical interlude</h3>
<div class="flag">
  <p>
    Here’s <a href="http://open.spotify.com/user/rjwells/playlist/6ddbHbP6pf8bHQ0CuvEowP">the link to the Entourage playlist</a>.
  </p>
</div>

<p>Since creating it in mid-December, I’ve been listening to the playlist and marking my favourite tracks so I could buy them on iTunes. There’s too many to do by hand, so a bit of automation is called for.</p>
<p>Dragging a track from the Spotify client gives you an <code>http://open.spotify.com/track/…</code> URL. Opening it in a browser will likely get you the newfangled web player, which isn’t much use, but tools such as <code>curl</code> still return the source to the detail view you used to get. We’ll use this to turn the URLs back into track titles and artist names, and from there into iTunes links.</p>
<div class="syntax"><pre><span></span><span class="lineno"> 1 </span><span class="ch">#!/usr/local/bin/python3</span>
<span class="lineno"> 2 </span>
<span class="lineno"> 3 </span><span class="kn">import</span> <span class="nn">os</span>
<span class="lineno"> 4 </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="lineno"> 5 </span><span class="kn">import</span> <span class="nn">requests</span>
<span class="lineno"> 6 </span><span class="kn">from</span> <span class="nn">bs4</span> <span class="k">import</span> <span class="n">BeautifulSoup</span> <span class="k">as</span> <span class="n">bs</span>
<span class="lineno"> 7 </span>
<span class="lineno"> 8 </span><span class="n">spot_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="lineno"> 9 </span><span class="n">itunes_search</span> <span class="o">=</span> <span class="s1">&#39;https://itunes.apple.com/search?term=</span><span class="si">{}</span><span class="s1">&amp;country=gb&#39;</span>
<span class="lineno">10 </span>
<span class="lineno">11 </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">spot_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">spot_file</span><span class="p">:</span>
<span class="lineno">12 </span>  <span class="n">spot_links</span> <span class="o">=</span> <span class="n">spot_file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
<span class="lineno">13 </span>
<span class="lineno">14 </span>
<span class="lineno">15 </span><span class="k">def</span> <span class="nf">spotify_to_itunes</span><span class="p">(</span><span class="n">link</span><span class="p">):</span>
<span class="lineno">16 </span>  <span class="n">spot_soup</span> <span class="o">=</span> <span class="n">bs</span><span class="p">((</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">))</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="lineno">17 </span>  <span class="n">title</span> <span class="o">=</span> <span class="n">spot_soup</span><span class="o">.</span><span class="n">h1</span><span class="o">.</span><span class="n">text</span>
<span class="lineno">18 </span>  <span class="n">artist</span> <span class="o">=</span> <span class="n">spot_soup</span><span class="o">.</span><span class="n">h2</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">text</span>
<span class="lineno">19 </span>  <span class="n">plussed</span> <span class="o">=</span> <span class="s1">&#39;+&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">title</span><span class="p">,</span> <span class="n">artist</span><span class="p">])</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;+&#39;</span><span class="p">)</span>
<span class="lineno">20 </span>  <span class="n">itunes_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">itunes_search</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">plussed</span><span class="p">))</span>
<span class="lineno">21 </span>  <span class="k">if</span> <span class="n">itunes_response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;resultCount&#39;</span><span class="p">]:</span>
<span class="lineno">22 </span>    <span class="k">return</span> <span class="n">itunes_response</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;results&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;trackViewUrl&#39;</span><span class="p">]</span>
<span class="lineno">23 </span>  <span class="k">else</span><span class="p">:</span>
<span class="lineno">24 </span>    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">artist</span><span class="p">,</span> <span class="n">title</span><span class="p">])</span>
<span class="lineno">25 </span>
<span class="lineno">26 </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">spot_links</span><span class="p">:</span>
<span class="lineno">27 </span>  <span class="nb">print</span><span class="p">(</span><span class="n">spotify_to_itunes</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
</pre></div>


<p>Dragging several tracks from Spotify gives you URLs separated by newlines, which I saved to a file that is read and split in lines 11 &amp; 12. We iterate over each URL at the end of the script, printing the result of passing the URL to <code>spotify_to_itunes</code>, which does the hard work.</p>
<p>We get the source for the track’s detail view in line 16 and pull out the title and artist, which are joined and the spaces replaced with plus signs in line 19 to make the string URL safe — like in the previous script.</p>
<p>This combined string is used to search the iTunes catalogue (line 20, with the URL in line 9). If there are any results we return the URL for the top hit, otherwise we return the artist name and track title so it can be looked up manually.</p>
<p>Taking the URL for the top iTunes result is potentially hazardous, but here I’m happy enough to put my faith in its search. Also the script takes two requests to process each track (lines 16 &amp; 20) so it is slow, but as it only needs to be run once so I don’t think it really matters.</p>
<p>I decided not to rig up the AppleScript side here, because in my mind it doesn’t require the same kind of industrial processing. At this point it’s a matter of taking time to listen to the track previews and decide which to buy.</p>
<p>Also in contrast to the previous scripts, I print to stdout here instead of writing directly to a file. I don’t have reason for this but I guess partly it’s because there’s no data structure to preserve, just a set of lines to transform.</p>
<p>At this point I’ve run the script and redirected the output to a file. My plan is open it in BBEdit and use <code>⌘L</code> to select each, send it to LaunchBar (using the Instant Send feature) and open the URLs in Safari and the leftover tracks in iTunes’s search. Thankfully the iTunes links just load a web preview and don’t activate iTunes itself.</p>
<p>I’ve done this already with the tracks in the reported file, run through a modified version of the above script. It works reasonably well.</p>
<h3>Wrapping up</h3>
<p>While writing (and <a href="/images/2014-01-22_entcommits.png">re-writing</a>) this post I began to doubt its value. These aren’t polished scripts and this shouldn’t be taken as a guide, but at the same time it is how I solved the problem. Examining the choices made — however little thought went into them — has been instructive for me and hopefully will give people facing similar problems something to think about.</p>
<p>And while I’d hesitate to call this a <em>real</em> problem, the cobbled-together solution has at least <a href="http://open.spotify.com/user/rjwells/playlist/6ddbHbP6pf8bHQ0CuvEowP">produced something</a> I’m still listening to after two months.</p>
  </article>
  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2014/01/my-one-ios-7-problem/">My one iOS 7 problem</a></h2>
      <p><time datetime="2014-01-16T12:25">Thursday, January 16 2014</time></p>
    </header>
    <p>I don’t want to get into the business of critiquing Apple’s OS releases — there are plenty of people better placed to do that. But I have <em>one</em> major criticism of iOS 7. One that irritated me on the day of release and irritates me today. It’s time to share.</p>
<p><em>I’m Rob and I’m an addict (of changing the screen brightness).</em></p>
<p>I don’t always second-guess the automatic setting, but I frequently do. Before iOS 7, you had to stop what you were doing, jump to Settings.app, go to the brightness page and adjust the slider. But we’ve now got <a href="http://www.imore.com/ios-7-review#control">Control Centre</a>, which you swipe up from the bottom of the screen and it has a brightness slider <em>right there</em>. Sorted?</p>
<p>Not quite. Adjusting the brightness before iOS 7 was slow and a bit haphazard since the settings screen wasn’t always representative of what you were looking at. But you got a decent idea.</p>
<p>Control Centre, however, flat-out lies to you about the brightness:</p>
<p class="full-width">
    <img alt="Side-by-side image showing the difference in brightness when the iOS7 Control Centre is shown and hidden" src="/images/2014-01-16_controlcentre.png">
</p>

<p>Now, this is by design — Control Centre’s a giant grey panel that covers the screen. But it means that the only elements at the “true” brightness are filled sections of enabled buttons and sliders.</p>
<p>The <a href="http://arstechnica.com/apple/2013/10/os-x-10-9/">article in the background</a> of the image above has a white background. If you use an eyedropper, the image on the right scores 100% brightness on a greyscale slider. On the left, with Control Centre shown, it’s just 53%.</p>
<style>
.post2014-01-16_grey {
    background-color: #999;
    color: white;
    text-align: center;
    padding: 1.375em;
}
</style>

<p class="post2014-01-16_grey">Does this background look white to you?</p>

<p>Despite using iOS 7 since its release in September, I still can’t set the brightness to my desired level in a single attempt because of this.</p>
<p>Yes, this is trivial, but let’s try a thought experiment. Imagine the only way you can set the playback volume is through Settings.app or the Control Centre. It’d be way more convenient to use Control Centre, right? How about if it <a href="http://en.wikipedia.org/wiki/Ducking">ducked</a> the volume by half?</p>
  </article>
  <article>
    <header>
      <h2 class="mute-links"><a href="https://robjwells.github.io/2014/01/next-and-last-weekdays/">Next and last weekdays</a></h2>
      <p><time datetime="2014-01-11T16:08">Saturday, January 11 2014</time></p>
    </header>
    <p>I was recently reminded of David Sparks’s <a href="http://macsparky.com/blog/2013/5/text-expander-snippets-date-and-time">TextExpander date snippets</a>, the most interesting of which use AppleScript to insert the date for the next occurrence of a certain weekday. (And were <a href="http://www.tuaw.com/2013/01/21/mac-productivity-ten-textexpander-date-snippets/">written by Ben Waldie</a>.)</p>
<p>Out of curiosity, I wrote a Python command-line tool called dayshift that does something similar. Its main differences are that it doesn’t have to be set up for specific days like the AppleScript snippets, and that it can find the date for a past weekday (“last Monday”) as well as a future one (“next Monday”).</p>
<div class="syntax"><pre><span></span><span class="lineno"> 1 </span><span class="ch">#!/usr/local/bin/python3</span>
<span class="lineno"> 2 </span><span class="sd">&quot;&quot;&quot;</span>
<span class="lineno"> 3 </span><span class="sd">Print the date of the next or last specified weekday.</span>
<span class="lineno"> 4 </span>
<span class="lineno"> 5 </span><span class="sd">Usage:</span>
<span class="lineno"> 6 </span><span class="sd">  dayshift next &lt;weekday&gt; [--format=&lt;fmt&gt; --inline]</span>
<span class="lineno"> 7 </span><span class="sd">  dayshift last &lt;weekday&gt; [--format=&lt;fmt&gt; --inline]</span>
<span class="lineno"> 8 </span>
<span class="lineno"> 9 </span><span class="sd">Options:</span>
<span class="lineno">10 </span><span class="sd">  --format=&lt;fmt&gt;, -f &lt;fmt&gt;  A strftime format string</span>
<span class="lineno">11 </span><span class="sd">                            [default: %Y-%m-%d]</span>
<span class="lineno">12 </span><span class="sd">  --inline, -i              Omit trailing newline</span>
<span class="lineno">13 </span>
<span class="lineno">14 </span><span class="sd">&quot;&quot;&quot;</span>
<span class="lineno">15 </span><span class="kn">from</span> <span class="nn">docopt</span> <span class="k">import</span> <span class="n">docopt</span>
<span class="lineno">16 </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="lineno">17 </span>
<span class="lineno">18 </span><span class="n">WEEKDAYS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;mon&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;tue&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;wed&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;thu&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="lineno">19 </span>            <span class="s1">&#39;fri&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;sat&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;sun&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>
<span class="lineno">20 </span>
<span class="lineno">21 </span><span class="n">args</span> <span class="o">=</span> <span class="n">docopt</span><span class="p">(</span><span class="vm">__doc__</span><span class="p">)</span>
<span class="lineno">22 </span><span class="n">starting_offset</span> <span class="o">=</span> <span class="mi">2</span> <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="s1">&#39;next&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="o">-</span><span class="mi">2</span>
<span class="lineno">23 </span><span class="n">start_date</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">starting_offset</span><span class="p">)</span>
<span class="lineno">24 </span><span class="n">start_integer</span> <span class="o">=</span> <span class="n">start_date</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span>
<span class="lineno">25 </span><span class="n">target_integer</span> <span class="o">=</span> <span class="n">WEEKDAYS</span><span class="p">[</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;&lt;weekday&gt;&#39;</span><span class="p">][:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
<span class="lineno">26 </span>
<span class="lineno">27 </span><span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="s1">&#39;next&#39;</span><span class="p">]:</span>
<span class="lineno">28 </span>  <span class="n">offset</span> <span class="o">=</span> <span class="n">target_integer</span> <span class="o">-</span> <span class="n">start_integer</span>
<span class="lineno">29 </span><span class="k">elif</span> <span class="n">args</span><span class="p">[</span><span class="s1">&#39;last&#39;</span><span class="p">]:</span>
<span class="lineno">30 </span>  <span class="n">offset</span> <span class="o">=</span> <span class="n">start_integer</span> <span class="o">-</span> <span class="n">target_integer</span>
<span class="lineno">31 </span>
<span class="lineno">32 </span><span class="k">if</span> <span class="n">offset</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
<span class="lineno">33 </span>  <span class="n">offset</span> <span class="o">+=</span> <span class="mi">7</span>
<span class="lineno">34 </span>
<span class="lineno">35 </span><span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="s1">&#39;last&#39;</span><span class="p">]:</span>
<span class="lineno">36 </span>  <span class="n">offset</span> <span class="o">/=</span> <span class="o">-</span><span class="mi">1</span>    <span class="c1"># Make the offset negative</span>
<span class="lineno">37 </span>
<span class="lineno">38 </span><span class="n">target_date</span> <span class="o">=</span> <span class="n">start_date</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
<span class="lineno">39 </span><span class="n">ending</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="s1">&#39;--inline&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="lineno">40 </span><span class="nb">print</span><span class="p">(</span><span class="n">target_date</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;--format&#39;</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="n">ending</span><span class="p">)</span>
</pre></div>


<div class="flag" id="update_2014-01-13">
  <p><strong>Update <time>2014-01-13</time></strong></p>
  <p>I’ve added an offset to the starting day (lines 22 & 23) to skip past the two days before and after the current date. The line numbers in the explanation below have been altered to match.</p>
  <p>You might like to look at the <a href="https://gist.github.com/robjwells/8370699">corresponding Gist</a> in case I’ve made any further changes.</p>
</div>

<p>The interface is created by <a href="http://docopt.org">docopt</a> in line 21 from the script’s docstring (lines 2–14).</p>
<p>After parsing the arguments we reduce the given weekday to its integer representation in line 25 by getting its first three characters, converting them to lowercase and using that string to key into the <code>WEEKDAYS</code> dictionary (lines 18 &amp; 19).</p>
<p>On line 24 we get the integer for a starting date which is offset forward or backward by two days (lines 22 &amp; 23). You can adjust the forward and backward offsets separately, depending on where you draw the line.</p>
<p>Now the <code>next</code> and <code>last</code> commands come into play, deciding how we compare the two weekday integers (lines 27–30). In both instances we can end up with 0 or a negative number so we add 7 to the offset (line 33).</p>
<p>But surely we want a negative number if we’re after the “last” weekday? Yes, but not just yet — at this point it tells us that we’ve passed the given weekday in the current week (if <code>next</code>) or the given weekday is still to come (if <code>last</code>). We add 7 to move outside of the current week.</p>
<p>To ensure we go back in time we specifically invert the offset in line 36, before adding it to the starting date in line 38 to reach the target date.</p>
<p>Now the two options shown in the docstring come into play. Line 39 uses the <code>--inline</code> flag to determine whether the printed string ends in a newline or not — handy when the script is called by a snippet inserted in the middle of some text.</p>
<p>The other option, <code>--format</code>, determines how the date is printed. I use docopt’s ability to have default values (see line 11) to print an <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601 date</a> if another format isn’t given. This lets me pass the argument directly to <code>strftime</code> in line 40.</p>
<h3>Using the script in TextExpander</h3>
<p>The script works great as a command-line utility:</p>
<pre><code>$ dayshift next Wednesday
2014-01-15
$ dayshift last Wednesday
2014-01-08</code></pre>


<p>But, returning to the original use case, I recommend two approaches.</p>
<p>You can set up individual snippets to find the next or last occurrence of a certain weekday. Add a new shell script snippet, with code similar to this:</p>
<div class="syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
/path/to/dayshift next Monday -i
</pre></div>


<p>Or you can use TextExpander’s fill-in feature to let you pick the options on the fly (line breaks inserted for readability):</p>
<div class="syntax"><pre><span></span><span class="ch">#!/bin/bash</span>
/path/to/dayshift %fillpopup:name<span class="o">=</span>Next/Last:default<span class="o">=</span>next:last%
%fillpopup:name<span class="o">=</span>Weekday:default<span class="o">=</span>Monday:Tuesday:
Wednesday:Thursday:Friday:Saturday:Sunday% -i
</pre></div>


<p>That looks pretty gross there, and it doesn’t look good in use either:</p>
<p><img alt="Screenshot of the dayshift fill-in TextExpander snippet" src="/images/2014-01-11_weekdaysfillin.png" /></p>
<p>But it gives you a lot of control and you can tab between the fields.</p>
<div class="flag" id="update_2014-01-12">
  <p><strong>Update <time>2014-01-12</time></strong></p>
  <p>Shortly after posting this yesterday, <a href="http://leancrew.com/all-this/">Dr Drang</a> sent me a nice email pointing out a <a href="http://www.leancrew.com/all-this/2012/09/eight-days-a-week/#comment-24659">comment by Dave Cross</a> on how to use the <code>date</code> utility in Unix to similar effect, which in its simplest form is <code>date -v+weds</code> (to get next Wednesday’s date).</p>
  <p>I recommend reading <a href="http://www.leancrew.com/all-this/2012/09/eight-days-a-week/">the entire post</a> that comment is in reply to as it addresses a very similar situation to the one above, but with an illuminating look at working with weekdays as integers.</p>
</div>
  </article>
  <div class="pagination">
<p class="pagination-older"><a href="https://robjwells.github.io/page-16/">Older posts</a></p><p class="pagination-newer"><a href="https://robjwells.github.io/page-14/">Newer posts</a></p>  </div>

</main>

<footer class="site-footer">
  <small class="mute-links">
    This work is licensed under a
    <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License</a>.
  </small>
</footer> <!-- .site-footer -->

</div> <!-- .wrapper -->

</body>

</html>